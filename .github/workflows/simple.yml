name: Simple Java Build

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    # ПРОСТОЙ способ установки Java
    - name: Install Java 8
      run: |
        sudo apt-get update
        sudo apt-get install -y openjdk-8-jdk
        export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
    
    - name: Verify installation
      run: |
        echo "Java version:"
        java -version
        echo "Javac version:"
        javac -version
    
    - name: Try to build
      run: |
        echo "Trying to compile..."
        if [ -f "pom.xml" ]; then
          mvn --version
          mvn clean compile || echo "Maven build failed, but Java is installed"
        else
          echo "No pom.xml found, but Java is installed correctly"
        fi
        
    - name: Success
      run: echo "✅ Java installation successful!"
